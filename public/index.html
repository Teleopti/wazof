<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" ng-app="wazof">
<head>
<link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
    <meta charset="utf-8"/>
    <title>wazof</title>
    <script src="javascripts/angular.min.js"></script>
    <script src="javascripts/ui-bootstrap-tpls-0.12.0.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <style type="text/css">
        @media print {
            #non-printable {
                display: none;
            }

            #printable {
                display: block;
            }
        }

        .hidden {
            display: none;
        }

        body {
            background: linear-gradient(rgba(255,255,255,0.2), rgba(255,255,255,0.1)), url("images/paysage.jpeg");
            background-size: cover;
            background-repeat: no-repeat;
            height: 100vh;
            font-family: 'Ubuntu', sans-serif;
        }

        .calendar {
            background-image: linear-gradient(#f5f5f5, lightgray);


        }
        .calendar td{
            border:2px solid lightgray !important;
            text-align: center;
            cursor: pointer;
        }

        .panel {
            padding: 10px;
            margin-top: 30px;
            cursor: not-allowed;
            border: 2px solid #bcbcbc;
        }

        table {
            text-align: center;
        }

        .block-small {
            padding: 10px 0;
            min-height: 30px;
        }
        
        .tall {
            min-height: 100px;
        }
    </style>
</head>
<body ng-view ng-controller="main" class="container">
<div id="non-printable">
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand">Wazof - vacation tool</a>
        </div>
        </div>
    </nav>
    <h4> 1. Fill the fields below : </h4>

    <form class="form-inline" role="form">
        <div class="form-group">
            <label class="sr-only" for="number">number</label>
            <input type="text" class="form-control" id="number" ng-model="employee.number"
                   placeholder="My employee number"/>
        </div>

        <div class="form-group">
            <label class="sr-only" for="name">name</label>
            <input type="text" class="form-control" id="name" ng-model="employee.name" placeholder="My name"/>
        </div>
        <br/>
        <br/>
        <div class="form-group">
            <label class="sr-only" for="month">month</label>
            <input type="text" class="form-control" id="month" ng-model="employee.month" placeholder="Month"/>
        </div>
        <div class="form-group">
            <label class="sr-only" for="year">year</label>
            <input type="text" class="form-control" id="year" ng-model="employee.year" placeholder="Year"/>
        </div>

        <div>
            <h4>2. Click on your vacation days : </h4>
            <table class="table table-bordered calendar" ng-click="selectDetails($event)">
                <tr>
                    <td ng-repeat="oneDay in monthDays1" ng-bind="oneDay"></td>
                </tr>
                <tr>
                    <td ng-repeat="oneDay in monthDays2" ng-bind="oneDay"></td>
                </tr>
                <tr>
                    <td ng-repeat="oneDay in monthDays3" ng-bind="oneDay"></td>
                </tr>
            </table>
        </div>
    </form>
    <div class="block-small">
    <div class="pull-left"><h4>3. Take a look to the generated content : </h4></div>
    <div class="pull-right"><button class="print-report btn btn-default" ng-click="printVacation()">4. And print your vacation report!</button></div>
    </div>
</div>

<div id="printable" class="panel">
    <div class="table-responsive">
    <table class="table table-condensed">
        <thead>
            <tr>
                <td><h4>Name</h4></td>
                <td><h4>Employee number</h4></td>
                <td><h4>Month</h4></td>
                <td><h4>Year</h4></td>
            </tr>
        </thead>
        <tbody>
        <tr>
            <td ng-bind="employee.name"></td>
            <td ng-bind="employee.number"></td>
            <td ng-bind="employee.month"></td>
            <td ng-bind="employee.year"></td>
        </tr>
        </tbody>
    </table>
    </div>
    <div class="block-small">
    <table class="table table-striped table-bordered  table-condensed">
        <thead>
            <tr>
                <td><h4>Day</h4></td>
                <td><h4>Code</h4></td>
                <td><h4>Time</h4></td>
            </tr>
        </thead>
        <tr ng-repeat="day in vacations">
            <td ng-bind="day.date"></td>
            <td ng-bind="day.code"></td>
            <td>8</td>
        </tr>
    </table>
</div>
    <div  class="block-small">
        <table class="table table-bordered"><thead><tr><td>Date</td><td>Employee's signature</td><td>Manager's signature</td></tr></thead>
        <tbody><tr><td><div  class="tall"></div></td><td><div  class="tall"></div></td><td><div  class="tall"></div></td></tr></tbody></table>
    </div>
</div>


<script type="text/ng-template" id="myModalContent.html">
    <div class="modal-header">
        <h3 class="modal-title">Details</h3>
    </div>
    <div class="modal-body">
        <form class="form">
            <div ng-repeat="code in codes">
                <input type="radio" ng-value="code.value" ng-model="$parent.selectedCode"/> {{code.name}}
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">OK</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>

<script type="text/javascript">
    var wazof = angular.module('wazof', ['ui.bootstrap']);
    wazof.controller('main', ['$scope', '$modal', function ($scope, $modal) {
        $scope.employee = {};
        $scope.vacations = [];
        $scope.monthDays1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        $scope.monthDays2 = [11, 12, 13, 14, 15, 16, 17, 18, 19, 20];
        $scope.monthDays3 = [21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31];


        $scope.printVacation = function (e) {
            window.print();
        };

        $scope.selectDetails = function (e) {
            $scope.currentDay = {};
            $scope.currentDay.date = e.target.innerHTML;
            var modalInstance = $modal.open({
                templateUrl: 'myModalContent.html',
                controller: 'ModalInstanceCtrl',
                size: 'sm'
            });

            modalInstance.result.then(function (code) {
                $scope.currentDay.code = code;
                $scope.vacations.push($scope.currentDay);
                $scope.currentDay = {};
            }, function () {
                // after
            });
        };
    }]);

    wazof.controller('ModalInstanceCtrl', function ($scope, $modalInstance) {

        $scope.codes = [{name:'Sjukavdrag (timmar)', value:1},
            {name:'Föräldraledig + barnets namn (timmar)', value:2},
            {name:'Tillfällig föräldrapenning (VAB) (timmar)', value: 3},
            {name:'Tillfällig föräldrapenning vid födsel ("pappadagar") (timmar)', value:4},
            {name:'Semester (heldagar)', value:5},
            {name:'Arbetstidsförkortning (valfria halv- eller heldagar)', value:6},
            {name:'Tjänstledighet med löneavdrag (timmar)', value:7},
            {name:'Tjänstledighet utan löneavdrag (permission) (timmar)', value: 8},
            {name:'Vård av anhörig (timmar)', value:9}];
        $scope.selectedCode = '1';

        $scope.ok = function () {
            $modalInstance.close($scope.selectedCode);//$scope.selected.item
        };

        $scope.cancel = function () {
            $modalInstance.dismiss('cancel');
        };
    });


</script>
</body>
</html>